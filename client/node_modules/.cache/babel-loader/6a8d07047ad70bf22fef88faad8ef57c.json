{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\ADMIN\\\\Downloads\\\\ThucTap\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Downloads\\\\ThucTap\\\\client\\\\src\\\\app\\\\views\\\\Employee\\\\Employee.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport MaterialTable, { MTableToolbar } from 'material-table';\nimport { Grid, TextField, Dialog, DialogTitle, DialogContent, ButtonGroup, Button, DialogContentText } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport { Breadcrumb, ConfirmationDialog } from 'egret';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SearchIcon from '@material-ui/icons/Search';\nimport EmployeeEditorDialog from './EmployeeEditorDialog';\nimport { searchByDto, deleteEmployee, updateEmployee } from './EmployeeService';\nimport { toast } from 'react-toastify';\ntoast.configure({\n  autoClose: 1000,\n  draggable: false,\n  limit: 3\n});\nvar useStyles = makeStyles(function (theme) {\n  return {\n    box: {\n      display: 'flex',\n      margin: '5px 0',\n      alignItems: 'space-evenly',\n      padding: theme.spacing(1)\n    },\n    groupButton: {\n      marginLeft: 10,\n      marginTop: 20,\n      display: 'flex',\n      justifyContent: 'end'\n    },\n    search: {\n      width: '25%',\n      marginLeft: 'auto'\n    },\n    button1: {\n      marginLeft: 5\n    },\n    dialogContentText: {\n      marginBottom: 20\n    },\n    textField: {\n      margin: theme.spacing(1)\n    },\n    dialogTitle: {\n      marginBottom: 10\n    }\n  };\n});\n\nfunction Employee() {\n  var _this = this;\n\n  var classes = useStyles();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      itemList = _useState2[0],\n      setItemList = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      state = _useState4[0],\n      setState = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      open = _useState6[0],\n      setOpen = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      deleteButton = _useState8[0],\n      setDeleteButton = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      submit = _useState10[0],\n      setSubmit = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      search = _useState12[0],\n      setSearch = _useState12[1];\n\n  var _useState13 = useState({}),\n      _useState14 = _slicedToArray(_useState13, 2),\n      oldUser = _useState14[0],\n      setOldUser = _useState14[1];\n\n  var columns = [{\n    title: 'Actions',\n    field: '',\n    render: function render(rowData) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n        variant: \"contained\",\n        size: \"small\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        style: {\n          backgroundColor: 'yellow'\n        },\n        onClick: function onClick() {\n          handleEdit(rowData);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(EditIcon, {\n        color: \"primary\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 8\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          handleOpenDelete(rowData);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        color: \"error\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 8\n        }\n      }))));\n    }\n  }, {\n    title: 'Name',\n    field: 'name'\n  }, {\n    title: 'Code',\n    field: 'code'\n  }, {\n    title: 'Age',\n    field: 'age'\n  }, {\n    title: 'Email',\n    field: 'email'\n  }, {\n    title: 'Phone',\n    field: 'phone'\n  }];\n  useEffect(function () {\n    searchByDto({}).then(function (res) {\n      setItemList(res.data.data);\n    });\n  }, [state]);\n  useEffect(function () {\n    searchByDto({}).then(function (res) {\n      setItemList(res.data.data.filter(function (employee) {\n        return handleSearch(employee);\n      }));\n    });\n  }, [search]); //Render\n\n  var reRender = function reRender() {\n    searchByDto({}).then(function (res) {\n      setItemList(res.data.data);\n    });\n  };\n\n  var handleSearch = function handleSearch(employee) {\n    if (search === '') {\n      return employee;\n    } else {\n      if (search !== '') {\n        var keySearch = search.toLowerCase();\n\n        if (employee.name.toLowerCase().includes(keySearch) || employee.email.toLowerCase().includes(keySearch) || employee.code.toLowerCase().includes(keySearch)) {\n          return employee;\n        }\n      }\n    }\n  }; //edit\n\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n    setOldUser({});\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n    setOldUser({});\n  }; //delete\n\n\n  var handleClose__Delete = function handleClose__Delete() {\n    setDeleteButton(false);\n  };\n\n  var handleOpenDelete = function handleOpenDelete(rowData) {\n    setDeleteButton(true);\n    setOldUser(rowData);\n  };\n\n  var handleDeleteEmployee = function handleDeleteEmployee(data) {\n    setOldUser(data);\n    deleteEmployee(data).then(function () {\n      reRender();\n      handleClose__Delete();\n      toast.success('Xóa thành công');\n    });\n  }; // edit\n\n\n  var handleEdit = function handleEdit(rowData) {\n    setOpen(true);\n    setOldUser(rowData);\n  };\n\n  var handleSubmit = function handleSubmit(name, age, code, email, phone, province, district, commune) {};\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-sm-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(EmployeeEditorDialog, {\n    employeeData: oldUser,\n    setstate: setState,\n    state: state,\n    handleClose: handleClose,\n    submit: submit,\n    open: open,\n    setOpen: setOpen,\n    reRender: reRender,\n    setSubmit: setSubmit,\n    setHandleSubmit: function setHandleSubmit(name, age, code, email, phone, province, district, commune) {\n      return handleSubmit(name, age, code, email, phone, province, district, commune);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    className: classes.box,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 6\n    }\n  }, \"Qu\\u1EA3n l\\xFD nh\\xE2n vi\\xEAn\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    routeSegments: [{\n      name: 'Danh mục',\n      path: '/directory/apartment'\n    }, {\n      name: 'Nhân viên'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 6\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    className: classes.box,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }\n  }, \"Th\\xEAm m\\u1EDBi\", /*#__PURE__*/React.createElement(PersonAddIcon, {\n    className: classes.button1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    className: classes.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: \"Search\",\n    type: \"text\",\n    fullWidth: true,\n    value: search,\n    onChange: function onChange(e) {\n      e.preventDefault();\n      setSearch(e.target.value);\n    },\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(SearchIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 24\n        }\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 6\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    open: deleteButton,\n    onConfirmDialogClose: handleClose__Delete,\n    onYesClick: function onYesClick() {\n      handleDeleteEmployee(oldUser);\n    },\n    text: \"B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n x\\xF3a \\\"\".concat(oldUser.name, \"\\\"?\"),\n    No: 'Không',\n    Yes: 'Đồng ý',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(MaterialTable, {\n    title: '',\n    data: itemList,\n    columns: columns,\n    options: {\n      selection: false,\n      paging: true,\n      search: false,\n      exportButton: true,\n      rowStyle: function rowStyle(rowData, index) {\n        return {\n          backgroundColor: index % 2 === 1 ? '#EEE' : '#FFF'\n        };\n      },\n      headerStyle: {\n        backgroundColor: '#358600',\n        color: '#fff'\n      },\n      padding: 'dense',\n      toolbar: true\n    },\n    localization: {\n      body: {\n        emptyDataSourceMessage: 'No data'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 5\n    }\n  })));\n}\n\nexport default Employee;","map":{"version":3,"sources":["C:/Users/ADMIN/Downloads/ThucTap/client/src/app/views/Employee/Employee.jsx"],"names":["React","useState","useEffect","MaterialTable","MTableToolbar","Grid","TextField","Dialog","DialogTitle","DialogContent","ButtonGroup","Button","DialogContentText","makeStyles","Helmet","Breadcrumb","ConfirmationDialog","PersonAddIcon","EditIcon","DeleteIcon","SearchIcon","EmployeeEditorDialog","searchByDto","deleteEmployee","updateEmployee","toast","configure","autoClose","draggable","limit","useStyles","theme","box","display","margin","alignItems","padding","spacing","groupButton","marginLeft","marginTop","justifyContent","search","width","button1","dialogContentText","marginBottom","textField","dialogTitle","Employee","classes","itemList","setItemList","state","setState","open","setOpen","deleteButton","setDeleteButton","submit","setSubmit","setSearch","oldUser","setOldUser","columns","title","field","render","rowData","backgroundColor","handleEdit","handleOpenDelete","then","res","data","filter","employee","handleSearch","reRender","keySearch","toLowerCase","name","includes","email","code","handleOpen","handleClose","handleClose__Delete","handleDeleteEmployee","success","handleSubmit","age","phone","province","district","commune","path","e","preventDefault","target","value","startAdornment","selection","paging","exportButton","rowStyle","index","headerStyle","color","toolbar","body","emptyDataSourceMessage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport MaterialTable, { MTableToolbar } from 'material-table';\nimport {\n\tGrid,\n\tTextField,\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tButtonGroup,\n\tButton,\n\tDialogContentText,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport { Breadcrumb, ConfirmationDialog } from 'egret';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SearchIcon from '@material-ui/icons/Search';\nimport EmployeeEditorDialog from './EmployeeEditorDialog';\nimport { searchByDto, deleteEmployee, updateEmployee } from './EmployeeService';\nimport { toast } from 'react-toastify';\n\ntoast.configure({\n\tautoClose: 1000,\n\tdraggable: false,\n\tlimit: 3,\n});\n\nconst useStyles = makeStyles((theme) => ({\n\tbox: {\n\t\tdisplay: 'flex',\n\t\tmargin: '5px 0',\n\t\talignItems: 'space-evenly',\n\t\tpadding: theme.spacing(1),\n\t},\n\n\tgroupButton: {\n\t\tmarginLeft: 10,\n\t\tmarginTop: 20,\n\t\tdisplay: 'flex',\n\t\tjustifyContent: 'end',\n\t},\n\tsearch: {\n\t\twidth: '25%',\n\t\tmarginLeft: 'auto',\n\t},\n\tbutton1: {\n\t\tmarginLeft: 5,\n\t},\n\tdialogContentText: {\n\t\tmarginBottom: 20,\n\t},\n\ttextField: {\n\t\tmargin: theme.spacing(1),\n\t},\n\tdialogTitle: {\n\t\tmarginBottom: 10,\n\t},\n}));\n\nfunction Employee() {\n\tconst classes = useStyles();\n\n\tconst [itemList, setItemList] = useState([]);\n\tconst [state, setState] = useState(true);\n\tconst [open, setOpen] = useState(false);\n\tconst [deleteButton, setDeleteButton] = useState(false);\n\tconst [submit, setSubmit] = useState(false);\n\tconst [search, setSearch] = useState('');\n\tconst [oldUser, setOldUser] = useState({});\n\n\tconst columns = [\n\t\t{\n\t\t\ttitle: 'Actions',\n\t\t\tfield: '',\n\t\t\trender: (rowData) => (\n\t\t\t\t<>\n\t\t\t\t\t<ButtonGroup\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tsize=\"small\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tstyle={{ backgroundColor: 'yellow' }}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleEdit(rowData);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<EditIcon color=\"primary\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thandleOpenDelete(rowData);\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<DeleteIcon color=\"error\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</>\n\t\t\t),\n\t\t},\n\t\t{ title: 'Name', field: 'name' },\n\t\t{ title: 'Code', field: 'code' },\n\t\t{ title: 'Age', field: 'age' },\n\t\t{ title: 'Email', field: 'email' },\n\t\t{ title: 'Phone', field: 'phone' },\n\t];\n\n\tuseEffect(() => {\n\t\tsearchByDto({}).then((res) => {\n\t\t\tsetItemList(res.data.data);\n\t\t});\n\t}, [state]);\n\tuseEffect(() => {\n\t\tsearchByDto({}).then((res) => {\n\t\t\tsetItemList(res.data.data.filter((employee) => handleSearch(employee)));\n\t\t});\n\t}, [search]);\n\n\t//Render\n\tconst reRender = () => {\n\t\tsearchByDto({}).then((res) => {\n\t\t\tsetItemList(res.data.data);\n\t\t});\n\t};\n\n\tconst handleSearch = (employee) => {\n\t\tif (search === '') {\n\t\t\treturn employee;\n\t\t} else {\n\t\t\tif (search !== '') {\n\t\t\t\tlet keySearch = search.toLowerCase();\n\t\t\t\tif (\n\t\t\t\t\temployee.name.toLowerCase().includes(keySearch) ||\n\t\t\t\t\temployee.email.toLowerCase().includes(keySearch) ||\n\t\t\t\t\temployee.code.toLowerCase().includes(keySearch)\n\t\t\t\t) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//edit\n\tconst handleOpen = () => {\n\t\tsetOpen(true);\n\t\tsetOldUser({});\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t\tsetOldUser({});\n\t};\n\n\t//delete\n\n\tconst handleClose__Delete = () => {\n\t\tsetDeleteButton(false);\n\t};\n\n\tconst handleOpenDelete = (rowData) => {\n\t\tsetDeleteButton(true);\n\t\tsetOldUser(rowData);\n\t};\n\n\tconst handleDeleteEmployee = (data) => {\n\t\tsetOldUser(data);\n\t\tdeleteEmployee(data).then(() => {\n\t\t\treRender();\n\t\t\thandleClose__Delete();\n\t\t\ttoast.success('Xóa thành công');\n\t\t});\n\t};\n\n\t// edit\n\tconst handleEdit = (rowData) => {\n\t\tsetOpen(true);\n\t\tsetOldUser(rowData);\n\t};\n\n\tconst handleSubmit = (\n\t\tname,\n\t\tage,\n\t\tcode,\n\t\temail,\n\t\tphone,\n\t\tprovince,\n\t\tdistrict,\n\t\tcommune\n\t) => {};\n\n\treturn (\n\t\t<div className=\"m-sm-30\">\n\t\t\t<EmployeeEditorDialog\n\t\t\t\temployeeData={oldUser}\n\t\t\t\tsetstate={setState}\n\t\t\t\tstate={state}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsubmit={submit}\n\t\t\t\topen={open}\n\t\t\t\tsetOpen={setOpen}\n\t\t\t\treRender={reRender}\n\t\t\t\tsetSubmit={setSubmit}\n\t\t\t\tsetHandleSubmit={(\n\t\t\t\t\tname,\n\t\t\t\t\tage,\n\t\t\t\t\tcode,\n\t\t\t\t\temail,\n\t\t\t\t\tphone,\n\t\t\t\t\tprovince,\n\t\t\t\t\tdistrict,\n\t\t\t\t\tcommune\n\t\t\t\t) =>\n\t\t\t\t\thandleSubmit(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tage,\n\t\t\t\t\t\tcode,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tphone,\n\t\t\t\t\t\tprovince,\n\t\t\t\t\t\tdistrict,\n\t\t\t\t\t\tcommune\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<Grid className={classes.box}>\n\t\t\t\t<Helmet>\n\t\t\t\t\t<title>Quản lý nhân viên</title>\n\t\t\t\t</Helmet>\n\t\t\t\t<div>\n\t\t\t\t\t<Breadcrumb\n\t\t\t\t\t\trouteSegments={[\n\t\t\t\t\t\t\t{ name: 'Danh mục', path: '/directory/apartment' },\n\t\t\t\t\t\t\t{ name: 'Nhân viên' },\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\n\t\t\t<Grid className={classes.box}>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={handleOpen}>\n\t\t\t\t\tThêm mới\n\t\t\t\t\t<PersonAddIcon className={classes.button1} />\n\t\t\t\t</Button>\n\n\t\t\t\t{/* Search Input */}\n\t\t\t\t<Grid className={classes.search}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tlabel=\"Search\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tsetSearch(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tstartAdornment: <SearchIcon />,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\n\t\t\t<Grid>\n\t\t\t\t<ConfirmationDialog\n\t\t\t\t\topen={deleteButton}\n\t\t\t\t\tonConfirmDialogClose={handleClose__Delete}\n\t\t\t\t\tonYesClick={() => {\n\t\t\t\t\t\thandleDeleteEmployee(oldUser);\n\t\t\t\t\t}}\n\t\t\t\t\ttext={`Bạn có chắc muốn xóa \"${oldUser.name}\"?`}\n\t\t\t\t\tNo={'Không'}\n\t\t\t\t\tYes={'Đồng ý'}\n\t\t\t\t/>\n\t\t\t</Grid>\n\n\t\t\t<Grid xs={12}>\n\t\t\t\t<MaterialTable\n\t\t\t\t\ttitle={''}\n\t\t\t\t\tdata={itemList}\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tselection: false,\n\t\t\t\t\t\tpaging: true,\n\t\t\t\t\t\tsearch: false,\n\t\t\t\t\t\texportButton: true,\n\n\t\t\t\t\t\trowStyle: (rowData, index) => ({\n\t\t\t\t\t\t\tbackgroundColor: index % 2 === 1 ? '#EEE' : '#FFF',\n\t\t\t\t\t\t}),\n\t\t\t\t\t\theaderStyle: {\n\t\t\t\t\t\t\tbackgroundColor: '#358600',\n\t\t\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpadding: 'dense',\n\t\t\t\t\t\ttoolbar: true,\n\t\t\t\t\t}}\n\t\t\t\t\tlocalization={{\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\temptyDataSourceMessage: 'No data',\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t</div>\n\t);\n}\n\nexport default Employee;\n"]},"metadata":{},"sourceType":"module"}